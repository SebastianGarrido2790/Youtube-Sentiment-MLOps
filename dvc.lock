schema: '2.0'
stages:
  data_ingestion:
    cmd: uv run python -m src.data.download_dataset --url 
      https://raw.githubusercontent.com/Himanshu-1703/reddit-sentiment-analysis/refs/heads/main/data/reddit.csv
      --output_path data/raw/reddit_comments.csv
    deps:
    - path: src/data/download_dataset.py
      hash: md5
      md5: 1d56bf095a1ff2ec3a4a8e6b9ceca44d
      size: 3665
    - path: src/utils/logger.py
      hash: md5
      md5: 73106bb3de64f8ef8c097a990a6e2f49
      size: 2345
    - path: src/utils/paths.py
      hash: md5
      md5: 2bdfcc4a2b3f9c156cd32bba1f011871
      size: 1586
    outs:
    - path: data/raw/reddit_comments.csv
      hash: md5
      md5: 38ee083169162dbac0cb07c80ac0f04e
      size: 6888934
  data_preparation:
    cmd: uv run python -m src.data.make_dataset --test_size 0.15 --random_state 
      42
    deps:
    - path: data/raw/reddit_comments.csv
      hash: md5
      md5: 38ee083169162dbac0cb07c80ac0f04e
      size: 6888934
    - path: src/data/make_dataset.py
      hash: md5
      md5: b7543782999dbf4d111656457adfc7f5
      size: 5693
    - path: src/utils/logger.py
      hash: md5
      md5: 73106bb3de64f8ef8c097a990a6e2f49
      size: 2345
    - path: src/utils/paths.py
      hash: md5
      md5: 2bdfcc4a2b3f9c156cd32bba1f011871
      size: 1586
    params:
      params.yaml:
        data_preparation.random_state: 42
        data_preparation.test_size: 0.15
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: 27afcf1e4e595381b70f8fd8b8e6ae7b
      size: 513629
    - path: data/processed/train.parquet
      hash: md5
      md5: ef9df44b106362663b835efdefe950c3
      size: 2394224
    - path: data/processed/val.parquet
      hash: md5
      md5: c55232be629f4fba0cdc3cce4329c594
      size: 499418
  feature_comparison:
    cmd: uv run python -m src.features.tfidf_vs_bert --ngram_ranges 
      [(1,1),(1,2),(1,3)] --max_features 5000 --batch_size 32 --n_estimators 200
      --max_depth 15
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: 27afcf1e4e595381b70f8fd8b8e6ae7b
      size: 513629
    - path: data/processed/train.parquet
      hash: md5
      md5: ef9df44b106362663b835efdefe950c3
      size: 2394224
    - path: src/features/tfidf_vs_bert.py
      hash: md5
      md5: 95417f73afa2a284ad55630b6da27ea5
      size: 12376
    - path: src/utils/logger.py
      hash: md5
      md5: 73106bb3de64f8ef8c097a990a6e2f49
      size: 2345
    - path: src/utils/mlflow_config.py
      hash: md5
      md5: 8ff67d5220552d5f63ad14f0705e458b
      size: 3318
    - path: src/utils/paths.py
      hash: md5
      md5: 2bdfcc4a2b3f9c156cd32bba1f011871
      size: 1586
    params:
      params.yaml:
        feature_comparison.batch_size: 32
        feature_comparison.max_depth: 15
        feature_comparison.max_features: 5000
        feature_comparison.mlflow_uri: http://127.0.0.1:5000
        feature_comparison.n_estimators: 200
        feature_comparison.ngram_ranges: '[(1,1),(1,2),(1,3)]'
    outs:
    - path: models/features/tfidf_vs_bert/
      hash: md5
      md5: 22a9a79d16d5e399fedaeb474928fb14.dir
      size: 556796
      nfiles: 3
    - path: reports/figures/tfidf_vs_bert/
      hash: md5
      md5: fb4df3d952e646bc7707246fab3fbf71.dir
      size: 70283
      nfiles: 3
  feature_tuning:
    cmd: uv run python -m src.features.tfidf_max_features --max_features_values 
      [1000,2000,3000,4000,5000,6000,7000,8000,9000,10000] --ngram_range (1,1) 
      --n_estimators 200 --max_depth 15
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: 27afcf1e4e595381b70f8fd8b8e6ae7b
      size: 513629
    - path: data/processed/train.parquet
      hash: md5
      md5: ef9df44b106362663b835efdefe950c3
      size: 2394224
    - path: src/features/tfidf_max_features.py
      hash: md5
      md5: 0f301ea76e644435d2ac8edec82c2f2b
      size: 8481
    - path: src/utils/logger.py
      hash: md5
      md5: 73106bb3de64f8ef8c097a990a6e2f49
      size: 2345
    - path: src/utils/mlflow_config.py
      hash: md5
      md5: 8ff67d5220552d5f63ad14f0705e458b
      size: 3318
    - path: src/utils/paths.py
      hash: md5
      md5: 2bdfcc4a2b3f9c156cd32bba1f011871
      size: 1586
    params:
      params.yaml:
        feature_tuning.best_ngram_range: (1,1)
        feature_tuning.max_depth: 15
        feature_tuning.max_features_values: '[1000,2000,3000,4000,5000,6000,7000,8000,9000,10000]'
        feature_tuning.n_estimators: 200
    outs:
    - path: models/features/tfidf_max_features/
      hash: md5
      md5: 6e2411e1f34d47d157afadc5bad18fa2.dir
      size: 2018918
      nfiles: 10
    - path: reports/figures/tfidf_max_features/
      hash: md5
      md5: d5b6114363259b91d3a4582263a2588f.dir
      size: 239882
      nfiles: 10
